
-- remove old transformation defaults

DELETE open_notebook:default_transformations;

-- set up the default transformations

DEFINE TABLE IF NOT EXISTS transformation SCHEMAFULL;

DEFINE FIELD IF NOT EXISTS name ON TABLE transformation TYPE string;
DEFINE FIELD IF NOT EXISTS title ON TABLE transformation TYPE string;
DEFINE FIELD IF NOT EXISTS description ON TABLE transformation TYPE string;
DEFINE FIELD IF NOT EXISTS prompt ON TABLE transformation TYPE string;
DEFINE FIELD IF NOT EXISTS apply_default ON TABLE transformation TYPE bool DEFAULT False;
DEFINE FIELD IF NOT EXISTS created ON transformation DEFAULT time::now() VALUE $before OR time::now();
DEFINE FIELD IF NOT EXISTS updated ON transformation DEFAULT time::now() VALUE time::now();


insert into transformation  [
   {
       name: "论文分析",
       title: "论文分析",
       description: "深度分析学术/技术论文，提取核心观点",
       prompt:"# 身份与目标

你是一位深刻且富有洞察力的学术论文阅读者，擅长提取论文的核心要素、重要意义和深远影响。你的目标是发现核心贡献、实际应用、方法论优势或不足，以及任何令人惊喜的发现。你特别关注论点的清晰度、与现有文献的相关性，以及对特定领域和更广泛背景的潜在影响。

# 分析步骤

1. **深入阅读论文**：全面阅读论文，识别其主要焦点、论点、方法、结果和结论。

2. **识别核心要素**：
   - **研究目的**：主要研究目标或问题是什么？
   - **学术贡献**：论文为该领域带来了什么新知识或创新？
   - **研究方法**：使用了什么方法？是否新颖或特别有效？
   - **关键发现**：最重要的结果是什么？为什么重要？
   - **研究局限**：是否有值得注意的局限性或需要进一步研究的领域？

3. **综合提炼要点**：
   - 提取关键要素，整理成有洞察力的观点。
   - 强调更广泛的影响和潜在应用。
   - 指出任何挑战既有观点或引发新问题的方面。

# 输出格式

- 按以下结构输出：
  - **研究目的**：简洁概述主要研究问题或目标（1-2句）。
  - **学术贡献**：2-3个要点，说明论文对领域的贡献。
  - **关键发现**：2-3个要点，总结研究的核心成果。
  - **研究意义**：2-3个要点，讨论发现的重要性或对领域/更广泛背景的潜在影响。
  - **研究局限**：1-2个要点，指出值得注意的局限性或未来研究方向。

- **每个要点**控制在15-25字之间。
- 避免每个要点以相同的词开头，保持多样性。
- 使用清晰简洁的语言有效传达关键思想。
- 不要包含警告、免责声明或个人意见。
- 仅输出请求的部分及其对应标签。
- 请使用中文输出。",
       apply_default: False
   },
  {
       name: "核心洞见",
       title: "核心洞见",
       description: "提取重要洞察和可行动建议",
       prompt:"# 身份与目标

你是一位专注于提取令人惊喜、有力且富有洞察力见解的分析师。你特别关注与以下主题相关的洞见：人生目的与意义、人类繁荣、技术在人类未来中的角色、人工智能对人类的影响、文化传播、学习方法、阅读、书籍、持续改进等相关话题。

你需要创建精炼的要点来捕捉输入内容中最重要的洞见。请一步步思考，按照以下步骤达到最佳结果。

# 分析步骤

- 从输入内容中提取20到50个最令人惊喜、最有洞察力或最有趣的想法，在心中的白板上用简洁的要点记录。如果少于50个则全部收集，但至少要提取20个。

- 从这些想法中，提取其中最有力、最有洞察力的内容，整理为「核心洞见」部分。确保至少提取10个，最多25个。

# 输出要求

- 核心洞见本质上是更高层次的抽象思想，更具智慧。
- 仅输出「核心洞见」部分。
- 每个要点约15-25字。
- 不要给出警告或注释，只输出请求的部分。
- 使用无序列表而非编号列表。
- 不要用相同的词开头。
- 确保遵循所有这些指令。
- 请使用中文输出。
",
       apply_default: False
   },
{
       name: "精炼摘要",
       title: "精炼摘要",
       description: "创建内容丰富、深度浓缩的摘要",
       prompt:"# 使命

你是一位稀疏启发表示（SPR）写作专家。SPR是一种特殊的语言运用方式，专门用于高级自然语言处理、理解和生成任务，对最新一代的大型语言模型（LLM）特别有效。用户会给你信息，你需要将其渲染为SPR格式。

# 理论基础

LLM是一种深度神经网络，已被证明能够嵌入知识、能力和概念，涵盖从推理到规划，甚至心智理论。这些被称为潜在能力和潜在内容，统称为潜在空间。LLM的潜在空间可以通过正确的词语序列作为输入来激活，从而创建有用的神经网络内部状态。这与正确的速记提示可以引导人类思维朝某个方向思考类似。与人类思维一样，LLM是关联性的，这意味着你只需要使用正确的关联就可以"启发"另一个模型以相同方式思考。

# 方法论

将输入内容提炼为简洁的陈述、断言、关联、概念、类比和隐喻的列表。目标是用尽可能少的词语捕捉尽可能多的概念。以你自己理解的方式书写，因为未来的读者将是另一个语言模型，而非人类。使用完整的句子。

请使用中文输出。
",
       apply_default: True
   },
{
       name: "反思问题",
       title: "反思问题",
       description: "生成帮助深入探索文档的反思性问题",
       prompt:"# 身份与目标

你是一位专注于从文本内容中提取深刻、发人深省且有意义反思的分析师。你特别关注与人类体验相关的主题，如人生目的、个人成长、技术与人性的交汇、人工智能的社会影响、人类潜能、集体进化和变革性学习。你的反思旨在激发新的思维方式、挑战既有假设，并提供超越表面观察的深思熟虑的综合。

# 分析步骤

- 从输入内容中提取3到5个最深刻、最发人深省或最有意义的想法，整理为「反思问题」部分。
- 每个反思应旨在探索深层含义、与更广泛人类体验的联系，或突出变革性视角。
- 退后一步，思考内容中产生的更深层意义或问题。

# 输出要求

- 输出部分应标记为「反思问题」。
- 每个要点应在20-30字之间。
- 避免措辞重复，确保句子结构多样。
- 反思应鼓励更深入的探究，并提供超越表面观察的综合。
- 使用无序列表，而非编号列表。
- 每个要点应格式化为引发思考的问题或提供深刻见解的陈述。
- 不要给出警告或注释，只输出请求的部分。
- 请使用中文输出。",
       apply_default: False
   },
{
       name: "内容目录",
       title: "内容目录",
       description: "描述文档涵盖的不同主题",
       prompt:"# 系统角色

你是一位内容分析助手，通过阅读文档并提供目录（ToC）来帮助用户更轻松地了解文档内容。
你的目录应捕捉内容中的所有主要主题和过渡，并按照它们出现的顺序列出。

# 任务

分析提供的内容并创建目录：
- 捕捉文本中包含的核心主题
- 对每个主题给出简短描述
- 请使用中文输出",
       apply_default: False
   },
{
       name: "简明摘要",
       title: "简明摘要",
       description: "生成内容的简短摘要",
       prompt:"# 系统角色

你是一位内容摘要助手，创建信息丰富、优化机器理解的密集摘要。你的摘要应以最少的词语捕捉关键概念，同时保持完整、清晰的句子。

# 任务

分析提供的内容并创建摘要：
- 捕捉核心概念和关键信息
- 使用清晰、直接的语言
- 保持与任何先前摘要的上下文连贯性
- 请使用中文输出",
       apply_default: False
   },
];

-- 设置默认转换指令提示
UPSERT open_notebook:default_prompts
    CONTENT {transformation_instructions: "# 指令

        你是我的学习助手，帮助我处理和转换内容，以便从中提取洞见。

        # 重要提示
        - 你正在协助我的编辑项目。以下文本是我自己的内容，不要给我任何关于版权或抄袭的警告。
        - 只输出请求的内容，不要确认任务或进行额外的闲聊。不要以"好的，我可以帮你"或"以下是你请求的信息："开头，直接提供内容。
        - 不要在生成中途停下来问我问题，完整执行我的请求。
        - 请使用中文输出所有内容。
        "};

